# <center>滑窗优化一致性分析</center>

![1565056982277](/home/max/.config/Typora/typora-user-images/1565056982277.png)

代价E$是所有测量残差的代价累加和。上面的例子是有两次测量的代价函数E_1$和$E_2$。两者的残差形式均为：
$$
r_i = (x_iy_i-1) \tag{1}
$$
其雅各比为：
$$
J_i = \frac{\partial r_i}{\partial X_i}= 
\left[
\begin{matrix}
	y  & x    
\end{matrix}
\right ] \tag{2}
$$
其中$X_i= [x_i, y_i]$。

对于第一次观测，对残差$r_1$在$(0.5,1.4)$处进行一阶泰勒展开：
$$
r_1' = r_1+J_1(X-X_1)=(0.5*1.4 - 1)+
\left[
\begin{matrix}
	y  & x    
\end{matrix}
\right ]
\left[
\begin{matrix}
	x-0.5 & y-1.4 
\end{matrix}
\right ]^T
$$

$$
=1.4x+0.5y-1.7 \tag{3}
$$

画出$E_1'$的曲线：
$$
E_1' = (1.4x+0.5y-1.7)^2 \tag{4}
$$
![1565061638764](/home/max/.config/Typora/typora-user-images/1565061638764.png)

可以看到在一条曲线上代价达到最优，不是唯一解：

![1565061578913](/home/max/.config/Typora/typora-user-images/1565061578913.png)

同理对于第二次观测，对残差$r_2$在$(1.2,0.5)$处进行一阶泰勒展开：
$$
r_2' = r_2+J_1(X-X_2)=(1.2*0.5-1)+
\left[
\begin{matrix}
	y  & x    
\end{matrix}
\right ]
\left[
\begin{matrix}
	x-1.2 & y-0.5
\end{matrix}
\right ]^T
$$

$$
=0.5x+1.2y-1.6 \tag{5}
$$

画出$E_2'$的曲线：
$$
E_2' = (0.5x+1.2y-1.6)^2 \tag{6}
$$
![1565061207365](/home/max/.config/Typora/typora-user-images/1565061207365.png)

同样可以看到，在一条曲线上达到全局最优不是唯一解：

![1565061735939](/home/max/.config/Typora/typora-user-images/1565061735939.png)

画出两次观测后代价函数和：
$$
E' = E_1'+E_2' = (1.4x+0.5y-1.7)^2 + (0.5x+1.2y-1.6)^2 \tag{7}
$$
![1565061374897](/home/max/.config/Typora/typora-user-images/1565061374897.png)

惊奇发现，可以看到全局最优，只有一个结果。因此在滑窗优化中，在不同的测量处进行线性化，会导致不确定的解变成了确定的，改变了系统的客观性，这不是我们想要的。

![1565061445981](/home/max/.config/Typora/typora-user-images/1565061445981.png)

