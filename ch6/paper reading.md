# <center>paper reading</center>

文章对比分析了对VI状态估计中的不可观的状态（gaude freedom）的３种不同操作：１．将不可观的的状态固定到特定的值，２．在这些不可观状态设置先验，３．任其在优化过程中自由演化。

１．问题描述

ＶＩ系统优化问题的目标函数（代价函数）：

![1565749157399](/home/max/.config/Typora/typora-user-images/1565749157399.png)

待优化参数：

![1565749220601](/home/max/.config/Typora/typora-user-images/1565749220601.png)

由于ＶＩ系统的全局位置和yaw不可观，４个自由度。上述３种处理不可观状态方式对应的优化参数和$H$矩阵的维度：

![1565749326765](/home/max/.config/Typora/typora-user-images/1565749326765.png)

２．３种方式具体处理

第一种将不可观的状态固定，不参与优化。此时优化问题变成了在没有不可观状态的小参数空间进行优化，因此其优化问题的$H$矩阵是可逆的。这是一种非常强的约束。第二种是用额外的惩罚增加目标函数。第三种方式是使用奇异的$H$的伪逆隐式地附加约束。

Ａ.前两种方式对于旋转参数的处理

在使用GN或者LM算法迭代优化过程中更新旋转变量的标准方法是在局部坐标系中：

![1565751900076](/home/max/.config/Typora/typora-user-images/1565751900076.png)

设定$\delta \phi^q$中关于ｚ轴旋转的角度为０，则固定了关于$R^q$的yaw部分。

然而，连续几次旋转更新后，

![1565752796951](/home/max/.config/Typora/typora-user-images/1565752796951.png)

并不能保证$R^q$对$R^0$的yaw保持固定。虽然对于yaw的固定和先验，对于任意相机位姿都可以，但是通常的做法是相对于第一帧相机位姿。因此对于其他相机位姿，采用正常的左乘李群更新，对于第一帧相机位姿采用如下方式更新：

![1565753271330](/home/max/.config/Typora/typora-user-images/1565753271330.png)

这里$\triangle \phi_0$初始化为０。实际上$\triangle \phi_0$模长为$\pi$的时候有奇异值，但是当初始旋转向量的模长小于$ \pi $的时候，该方法是适用的，真实系统中大多数情况是这样，比如由视觉前端提供一个旋转。

B.3种不同方式的处理

第一种固定不可观的状态：在整个优化过程中固定第一帧相机位姿的位置和yaw：

![1565753896864](/home/max/.config/Typora/typora-user-images/1565753896864.png)

固定这些参数向量，等价于在残差对这些参数向量的雅各比矩阵的对应列设置为０。

第二种设定先验的方法是在原来的目标函数上加上一个惩罚：

![1565754186655](/home/max/.config/Typora/typora-user-images/1565754186655.png)

第三种是任其自由演化，为了处理$H$矩阵的奇异问题，通常加上$H$矩阵的伪逆或者阻尼因子(单位阵$I$)使得优化问题有一个比较好的参数更新。

３．结论

Ａ.上述三种方式处理的结果，精度几乎一致

Ｂ.第二种设置先验的方式，需要选择合适的先验权重，以避免计算量增加

Ｃ.在适当的权重下，第二种设定先验的方式与第一种固定状态的方式有几乎相同的性能（精度和计算代价）

Ｄ.第三种任其自由演化的方式，比其他两种方法稍快，因为需要更少的迭代次数就能收敛。

４．关于３种方式的协方差比较

第三种自由演化处理方式的参数协方差与其他两种方式不同，不能直接以有意义的方式解释。但是可以通过一个线性转换：

![1565771822726](/home/max/.config/Typora/typora-user-images/1565771822726.png)

将第三种自由演化的协方差转换为第二种固定状态的协方差。